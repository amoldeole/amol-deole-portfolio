/*! For license information please see 40.78488c6c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkamol_deole_portfolio=self.webpackChunkamol_deole_portfolio||[]).push([[40],{1286:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},1884:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},2043:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},2574:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},3944:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},7118:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9040:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var s=a(2555),r=a(5043),l=a(5487),i=a(3944),n=a(1286),o=a(9333),c=a(2043),d=a(2574),h=a(1884),x=a(9292),u=a(7118),m=a(9482),y=a(8564),g=a(9328),f=a(579);const p=()=>{const[e,t]=(0,r.useState)([]),[a,p]=(0,r.useState)(""),[b,j]=(0,r.useState)(!0),[v,k]=(0,r.useState)(null),[N,w]=(0,r.useState)(1),[A,C]=(0,r.useState)(!0),[S,_]=(0,r.useState)(null),{selectChat:M,loadChats:z}=(0,m.Y)(),L=g.y.getUser(),F=(0,r.useCallback)((async()=>{try{j(!0),k(null);const e=await fetch("http://localhost:5000/api/auth/users?page=".concat(N,"&limit=10&sortBy=createdAt&sortOrder=desc"),{headers:(0,s.A)({"Content-Type":"application/json"},g.y.getAuthHeaders())});if(!e.ok){if(401===e.status)throw g.y.logout(),new Error("Authentication failed. Please login again.");throw new Error("HTTP error! status: ".concat(e.status))}const a=await e.json();let r=[],l=null;if(a&&"object"===typeof a&&(a.success&&a.data?Array.isArray(a.data.users)?(r=a.data.users,l=a.data.pagination):Array.isArray(a.data)&&(r=a.data):Array.isArray(a.users)?(r=a.users,l=a.pagination):Array.isArray(a)&&(r=a)),!Array.isArray(r))throw console.error("Invalid users data received:",a),new Error("Invalid response format from server");const i=r.filter((e=>e&&"object"===typeof e&&e._id?e._id!==(null===L||void 0===L?void 0:L._id):(console.warn("Invalid user object:",e),!1)));t(1===N?i:e=>[...e,...i]),C(l&&"object"===typeof l?!0===l.hasNext:10===i.length)}catch(v){console.error("Failed to load contacts:",v),k(v instanceof Error?v.message:"Failed to load contacts")}finally{j(!1)}}),[N,null===L||void 0===L?void 0:L._id]);(0,r.useEffect)((()=>{F()}),[F]);const E=e.filter((e=>{if(!e||"object"!==typeof e)return!1;const t=String(e.firstName||""),s=String(e.lastName||""),r=String(e.email||""),l="".concat(t," ").concat(s).toLowerCase(),i=a.toLowerCase();return l.includes(i)||r.toLowerCase().includes(i)})),T=E.filter((e=>e.isFavorite)),P=E.filter((e=>!e.isFavorite)),H=e=>{if(!e)return"Never";try{const t=new Date,a=new Date(e),s=Math.floor((t.getTime()-a.getTime())/6e4);return s<1?"just now":s<60?"".concat(s,"m ago"):s<1440?"".concat(Math.floor(s/60),"h ago"):a.toLocaleDateString()}catch(v){return"Unknown"}},O=e=>{let{contact:t}=e;if(!t||"object"!==typeof t||!t._id)return null;const a=String(t.firstName||"Unknown"),s=String(t.lastName||"User"),r=String(t.email||"No email"),h="".concat(a," ").concat(s),x="".concat(a.charAt(0)).concat(s.charAt(0)).toUpperCase();return(0,f.jsx)(l.P.div,{whileHover:{backgroundColor:"rgba(59, 130, 246, 0.05)"},className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer border-b border-gray-100 dark:border-gray-700",children:(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:x}),t.isOnline&&(0,f.jsx)("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-900"}),t.isFavorite&&(0,f.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,f.jsx)(i.A,{size:10,className:"text-white fill-current"})})]}),(0,f.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:h}),(0,f.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,f.jsx)("button",{className:"p-1 text-gray-400 hover:text-green-600 rounded transition-colors",title:"Voice Call",onClick:e=>{e.stopPropagation()},children:(0,f.jsx)(n.A,{size:16})}),(0,f.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600 rounded transition-colors",title:"Video Call",onClick:e=>{e.stopPropagation()},children:(0,f.jsx)(o.A,{size:16})}),(0,f.jsx)("button",{onClick:e=>{e.stopPropagation(),(async e=>{if(S!==e._id)try{_(e._id),k(null);const t=await y.O.createIndividualChat(e._id);if(!t.success||!t.data)throw new Error(t.message||"Failed to create chat");await z(),M(t.data)}catch(v){console.error("Failed to start chat:",v),k(v instanceof Error?v.message:"Failed to start chat")}finally{_(null)}})(t)},disabled:S===t._id,className:"p-1 text-gray-400 hover:text-blue-600 rounded transition-colors disabled:opacity-50",title:"Start Chat",children:S===t._id?(0,f.jsx)(c.A,{size:16,className:"animate-spin"}):(0,f.jsx)(d.A,{size:16})})]})]}),(0,f.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:r}),(0,f.jsx)("p",{className:"text-xs text-gray-400",children:t.isOnline?"Online":"Last seen ".concat(H(t.lastSeen))})]})]})})};return(0,f.jsxs)("div",{className:"h-full flex flex-col bg-white dark:bg-gray-900",children:[(0,f.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,f.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Contacts"}),(0,f.jsx)("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:(0,f.jsx)(h.A,{size:20})})]}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,f.jsx)("input",{type:"text",placeholder:"Search contacts...",value:a,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-800 border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white"})]})]}),v&&(0,f.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500",children:[(0,f.jsx)("p",{className:"text-sm text-red-700 dark:text-red-400",children:v}),(0,f.jsx)("button",{onClick:()=>{k(null),w(1),F()},className:"text-sm text-red-600 dark:text-red-400 hover:underline mt-1",children:"Try again"})]}),(0,f.jsx)("div",{className:"flex-1 overflow-y-auto",children:b&&1===N?(0,f.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,f.jsxs)("div",{className:"text-center",children:[(0,f.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,f.jsx)("p",{className:"text-sm text-gray-500",children:"Loading contacts..."})]})}):(0,f.jsxs)(f.Fragment,{children:[T.length>0&&(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800",children:(0,f.jsxs)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[(0,f.jsx)(i.A,{size:16,className:"mr-2 text-yellow-500"}),"Favorites (",T.length,")"]})}),T.map((e=>(0,f.jsx)(O,{contact:e},e._id)))]}),P.length>0&&(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800",children:(0,f.jsxs)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[(0,f.jsx)(u.A,{size:16,className:"mr-2"}),"All Contacts (",P.length,")"]})}),P.map((e=>(0,f.jsx)(O,{contact:e},e._id)))]}),A&&!b&&P.length>0&&(0,f.jsx)("div",{className:"p-4",children:(0,f.jsx)("button",{onClick:()=>{!b&&A&&w((e=>e+1))},className:"w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Load More Contacts"})}),b&&N>1&&(0,f.jsxs)("div",{className:"flex items-center justify-center p-4",children:[(0,f.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,f.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"Loading more..."})]}),0===E.length&&!b&&!v&&(0,f.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:(0,f.jsxs)("div",{className:"text-center",children:[(0,f.jsx)(u.A,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,f.jsx)("p",{className:"font-medium",children:"No contacts found"}),(0,f.jsx)("p",{className:"text-sm",children:a?"Try adjusting your search terms":"No users available to connect with"}),!a&&(0,f.jsx)("button",{onClick:()=>{w(1),F()},className:"mt-2 text-blue-600 hover:text-blue-800 text-sm",children:"Refresh contacts"})]})})]})})]})}},9292:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9333:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])}}]);
//# sourceMappingURL=40.78488c6c.chunk.js.map