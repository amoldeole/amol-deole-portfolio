/*! For license information please see 665.e6acc6f8.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkamol_deole_portfolio=self.webpackChunkamol_deole_portfolio||[]).push([[665],{614:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},665:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(2555),r=a(5043),l=a(5487),d=a(7118);const i=(0,a(7784).A)("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var n=a(2489),c=a(9292),x=a(2043),o=a(2574),h=a(1286),m=a(9333),g=a(5087),y=a(9855),u=a(614),p=a(9328),k=a(9482),j=a(8564),b=a(579);const f=()=>{const[e,t]=(0,r.useState)([]),[a,f]=(0,r.useState)(""),[N,v]=(0,r.useState)(!0),[w,A]=(0,r.useState)(null),[C,_]=(0,r.useState)(1),[M,S]=(0,r.useState)(!0),[O,U]=(0,r.useState)(null),[z,L]=(0,r.useState)("all"),[B,D]=(0,r.useState)(null),{selectChat:T,loadChats:E}=(0,k.Y)(),V=p.y.getUser(),F=(0,r.useCallback)((async()=>{try{v(!0),A(null);const e=await fetch("http://localhost:5000/api/auth/users?page=".concat(C,"&limit=10&sortBy=createdAt&sortOrder=desc"),{headers:(0,s.A)({"Content-Type":"application/json"},p.y.getAuthHeaders())});if(!e.ok){if(401===e.status)throw p.y.logout(),new Error("Authentication failed. Please login again.");throw new Error("HTTP error! status: ".concat(e.status))}const a=await e.json();let r=[],l=null;a.success&&a.data?Array.isArray(a.data.users)?(r=a.data.users,l=a.data.pagination):Array.isArray(a.data)&&(r=a.data):Array.isArray(a)?r=a:a.users&&Array.isArray(a.users)&&(r=a.users,l=a.pagination);const d=r.filter((e=>e._id!==(null===V||void 0===V?void 0:V._id)));t(1===C?d:e=>[...e,...d]),S(l?l.hasNext:10===r.length)}catch(w){console.error("Failed to load contacts:",w),A(w instanceof Error?w.message:"Failed to load contacts")}finally{v(!1)}}),[C,null===V||void 0===V?void 0:V._id]);(0,r.useEffect)((()=>{F()}),[F]);const H=e.filter((e=>{const t="".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(a.toLowerCase())||e.email.toLowerCase().includes(a.toLowerCase()),s="all"===z||"online"===z&&e.isOnline||"blocked"===z&&e.isBlocked;return t&&s})),P=e=>new Date(e).toLocaleDateString(),q=e=>{if(!e)return"Never";const t=new Date,a=new Date(e),s=Math.floor((t.getTime()-a.getTime())/6e4);return s<1?"just now":s<60?"".concat(s,"m ago"):s<1440?"".concat(Math.floor(s/60),"h ago"):a.toLocaleDateString()},J={total:e.length,online:e.filter((e=>e.isOnline)).length,blocked:e.filter((e=>e.isBlocked)).length,admins:e.filter((e=>"admin"===e.role)).length};return(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Contacts Management"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage user contacts and relationships"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(d.A,{className:"h-8 w-8 text-blue-600"}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:J.total})]})]})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"h-8 w-8 bg-green-500 rounded-full flex items-center justify-center",children:(0,b.jsx)("div",{className:"h-3 w-3 bg-white rounded-full"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Online Users"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:J.online})]})]})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(i,{className:"h-8 w-8 text-red-600"}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Blocked Users"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:J.blocked})]})]})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(n.A,{className:"h-8 w-8 text-purple-600"}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Admins"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:J.admins})]})]})})]}),(0,b.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,b.jsx)("input",{type:"text",placeholder:"Search users...",value:a,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),(0,b.jsx)("div",{className:"flex items-center space-x-2",children:(0,b.jsxs)("select",{value:z,onChange:e=>L(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[(0,b.jsx)("option",{value:"all",children:"All Users"}),(0,b.jsx)("option",{value:"online",children:"Online"}),(0,b.jsx)("option",{value:"blocked",children:"Blocked"})]})})]}),w&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500",children:[(0,b.jsx)("p",{className:"text-sm text-red-700 dark:text-red-400",children:w}),(0,b.jsx)("button",{onClick:()=>{A(null),_(1),F()},className:"text-sm text-red-600 dark:text-red-400 hover:underline mt-1",children:"Try again"})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[N&&1===C?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,b.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-900",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Email"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Role"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Joined"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:H.map((e=>(0,b.jsxs)(l.P.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:"".concat(e.firstName.charAt(0)).concat(e.lastName.charAt(0)).toUpperCase()}),e.isOnline&&(0,b.jsx)("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-800"})]}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["".concat(e.firstName," ").concat(e.lastName),e._id===(null===V||void 0===V?void 0:V._id)&&(0,b.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"You"})]}),(0,b.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.isOnline?"Online":e.lastSeen?"Last seen ".concat(q(e.lastSeen)):"Offline"})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.email}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isOnline?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":e.isBlocked?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:e.isOnline?"Online":e.isBlocked?"Blocked":"Offline"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(0,b.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("admin"===e.role?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:e.role||"user"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.createdAt?P(e.createdAt):"Unknown"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("button",{onClick:()=>(async e=>{if(O!==e._id)try{U(e._id);const t=await j.O.createIndividualChat(e._id);if(!t.success||!t.data)throw new Error(t.message||"Failed to create chat");await E(),T(t.data)}catch(w){console.error("Failed to start chat:",w),A(w instanceof Error?w.message:"Failed to start chat")}finally{U(null)}})(e),disabled:O===e._id||e._id===(null===V||void 0===V?void 0:V._id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 disabled:opacity-50",title:"Start Chat",children:O===e._id?(0,b.jsx)(x.A,{size:16,className:"animate-spin"}):(0,b.jsx)(o.A,{size:16})}),(0,b.jsx)("button",{className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Voice Call",children:(0,b.jsx)(h.A,{size:16})}),(0,b.jsx)("button",{className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Video Call",children:(0,b.jsx)(m.A,{size:16})}),(0,b.jsx)("button",{onClick:()=>D(e),className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300",title:"View Details",children:(0,b.jsx)(g.A,{size:16})}),e._id!==(null===V||void 0===V?void 0:V._id)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>(async e=>{console.log("Block user:",e)})(e._id),className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",title:"Block User",children:(0,b.jsx)(i,{size:16})}),(0,b.jsx)("button",{onClick:()=>(async e=>{console.log("Delete user:",e)})(e._id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete User",children:(0,b.jsx)(y.A,{size:16})})]})]})})]},e._id)))})]})}),M&&!N&&(0,b.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:(0,b.jsx)("button",{onClick:()=>_((e=>e+1)),className:"w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Load More Users"})}),N&&C>1&&(0,b.jsxs)("div",{className:"flex items-center justify-center p-4 border-t border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,b.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"Loading more..."})]}),0===H.length&&!N&&!w&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(d.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No users found"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:a?"Try adjusting your search terms.":"No users available."})]})]}),B&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-96 max-w-full",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"User Details"}),(0,b.jsx)("button",{onClick:()=>D(null),className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)(u.A,{size:20})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold text-xl",children:"".concat(B.firstName.charAt(0)).concat(B.lastName.charAt(0)).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"".concat(B.firstName," ").concat(B.lastName)}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:B.email})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Status:"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:B.isOnline?"Online":"Offline"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Role:"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:B.role||"user"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Joined:"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:B.createdAt?P(B.createdAt):"Unknown"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Last Seen:"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:B.isOnline?"Online now":B.lastSeen?q(B.lastSeen):"Never"})]})]})]})]})})]})}},1286:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},2043:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},2489:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},2574:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},5087:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7118:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9292:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9333:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},9855:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=665.e6acc6f8.chunk.js.map