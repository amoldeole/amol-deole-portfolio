/*! For license information please see 338.3cd33d3f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkamol_deole_portfolio=self.webpackChunkamol_deole_portfolio||[]).push([[338],{614:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1286:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},2043:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},2494:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]])},2574:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},3546:(e,t,s)=>{s.d(t,{N:()=>v});var a=s(579),r=s(5043),n=s(2190),i=s(4930),l=s(293),c=s(2555),o=s(9674),d=s(8676),u=s(1051);class h extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,s=(0,d.s)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function x(e){let{children:t,isPresent:s,anchorX:n}=e;const i=(0,r.useId)(),l=(0,r.useRef)(null),c=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=(0,r.useContext)(u.Q);return(0,r.useInsertionEffect)((()=>{const{width:e,height:t,top:a,left:r,right:d}=c.current;if(s||!l.current||!e||!t)return;const u="left"===n?"left: ".concat(r):"right: ".concat(d);l.current.dataset.motionPopId=i;const h=document.createElement("style");return o&&(h.nonce=o),document.head.appendChild(h),h.sheet&&h.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(u,"px !important;\n            top: ").concat(a,"px !important;\n          }\n        ")),()=>{document.head.contains(h)&&document.head.removeChild(h)}}),[s]),(0,a.jsx)(h,{isPresent:s,childRef:l,sizeRef:c,children:r.cloneElement(t,{ref:l})})}const m=e=>{let{children:t,initial:s,isPresent:n,onExitComplete:l,custom:d,presenceAffectsLayout:u,mode:h,anchorX:m}=e;const g=(0,i.M)(y),p=(0,r.useId)();let f=!0,v=(0,r.useMemo)((()=>(f=!1,{id:p,initial:s,isPresent:n,custom:d,onExitComplete:e=>{g.set(e,!0);for(const t of g.values())if(!t)return;l&&l()},register:e=>(g.set(e,!1),()=>g.delete(e))})),[n,g,l]);return u&&f&&(v=(0,c.A)({},v)),(0,r.useMemo)((()=>{g.forEach(((e,t)=>g.set(t,!1)))}),[n]),r.useEffect((()=>{!n&&!g.size&&l&&l()}),[n]),"popLayout"===h&&(t=(0,a.jsx)(x,{isPresent:n,anchorX:m,children:t})),(0,a.jsx)(o.t.Provider,{value:v,children:t})};function y(){return new Map}var g=s(8917);const p=e=>e.key||"";function f(e){const t=[];return r.Children.forEach(e,(e=>{(0,r.isValidElement)(e)&&t.push(e)})),t}const v=e=>{let{children:t,custom:s,initial:c=!0,onExitComplete:o,presenceAffectsLayout:d=!0,mode:u="sync",propagate:h=!1,anchorX:x="left"}=e;const[y,v]=(0,g.xQ)(h),b=(0,r.useMemo)((()=>f(t)),[t]),k=h&&!y?[]:b.map(p),j=(0,r.useRef)(!0),N=(0,r.useRef)(b),w=(0,i.M)((()=>new Map)),[A,C]=(0,r.useState)(b),[_,M]=(0,r.useState)(b);(0,l.E)((()=>{j.current=!1,N.current=b;for(let e=0;e<_.length;e++){const t=p(_[e]);k.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}}),[_,k.length,k.join("-")]);const z=[];if(b!==A){let e=[...b];for(let t=0;t<_.length;t++){const s=_[t],a=p(s);k.includes(a)||(e.splice(t,0,s),z.push(s))}return"wait"===u&&z.length&&(e=z),M(f(e)),C(b),null}const{forceRender:E}=(0,r.useContext)(n.L);return(0,a.jsx)(a.Fragment,{children:_.map((e=>{const t=p(e),r=!(h&&!y)&&(b===_||k.includes(t));return(0,a.jsx)(m,{isPresent:r,initial:!(j.current&&!c)&&void 0,custom:s,presenceAffectsLayout:d,mode:u,onExitComplete:r?void 0:()=>{if(!w.has(t))return;w.set(t,!0);let e=!0;w.forEach((t=>{t||(e=!1)})),e&&(null===E||void 0===E||E(),M(N.current),h&&(null===v||void 0===v||v()),o&&o())},anchorX:x,children:e},t)}))})}},5469:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5686:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},5746:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},6338:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var a=s(2555),r=s(5043),n=s(5487),i=s(3546),l=s(614),c=s(2574),o=s(7365),d=s(9292),u=s(2043),h=s(7118),x=s(5469),m=s(1286),y=s(9333),g=s(5686),p=s(2494),f=s(7922),v=s(5746),b=s(6907),k=s(8564),j=s(9328),N=s(1824),w=s(579);const A=()=>{const[e,t]=(0,r.useState)(!1),[s,A]=(0,r.useState)([]),[C,_]=(0,r.useState)(null),[M,z]=(0,r.useState)([]),[E,P]=(0,r.useState)(""),[S,L]=(0,r.useState)(!1),[I,R]=(0,r.useState)(!1),[T,U]=(0,r.useState)(!1),[F,H]=(0,r.useState)(""),[X,D]=(0,r.useState)("chats"),O=(0,b.Y)(),{initiateCall:q}=(0,N.G)(),G=j.y.getUser(),K=(0,r.useRef)(!1);(0,r.useEffect)((()=>{if(!O)return;const e=e=>{C&&e.chatId===C._id&&e.userId!==(null===G||void 0===G?void 0:G._id)&&U(e.isTyping)},t=e=>{console.log("New message received:",e),C&&e.chatId===C._id&&z((t=>[...t,e])),A((t=>t.map((t=>t._id===e.chatId?(0,a.A)((0,a.A)({},t),{},{unreadCount:(t.unreadCount||0)+1,lastMessage:e}):t)))),C&&e.chatId===C._id||window.dispatchEvent(new CustomEvent("toast",{detail:{type:"notification",message:"New message from ".concat(e.sender.firstName,": ").concat(e.content)}}))};return O.on("userTyping",e),O.on("newMessage",t),()=>{O.off("userTyping",e),O.off("newMessage",t)}}),[C,G,O]);const Q=(0,r.useCallback)((async()=>{try{var e,t;L(!0);const s=await k.O.getUserChats(),a=(null===(e=s.data)||void 0===e?void 0:e.chats)||(null===(t=s.data)||void 0===t?void 0:t.items)||[];A(a)}catch(s){console.error("Failed to load chats:",s)}finally{L(!1)}}),[]),V=(0,r.useCallback)((async e=>{try{var t,s;L(!0);const a=await k.O.getChatMessages(e),r=(null===(t=a.data)||void 0===t?void 0:t.messages)||(null===(s=a.data)||void 0===s?void 0:s.items)||[];z(r)}catch(a){console.error("Failed to load messages:",a)}finally{L(!1)}}),[]),W=(0,r.useCallback)((e=>{P(e.target.value),!I&&e.target.value.trim()?(R(!0),C&&O&&O.sendTyping(C._id,!0)):I&&!e.target.value.trim()&&(R(!1),C&&O&&O.sendTyping(C._id,!1))}),[I,C,O]),B=(0,r.useCallback)((async()=>{if(!E.trim()||!C||!O||K.current)return;K.current=!0;const e=E.trim();P("");try{const t="temp_".concat(Date.now(),"_").concat(Math.random());O.sendMessage({chatId:C._id,content:e,tempId:t,messageType:"text"}),await k.O.sendMessage(C._id,e),R(!1),O.sendTyping(C._id,!1)}catch(t){console.error("Failed to send message:",t),P(e)}finally{K.current=!1}}),[E,C,O]),Y=(0,r.useCallback)((e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),B())}),[B]),Z=(0,r.useCallback)((e=>{_(e),D("chat"),O&&O.joinChat(e._id),V(e._id),A((t=>t.map((t=>t._id===e._id?(0,a.A)((0,a.A)({},t),{},{unreadCount:0}):t))))}),[O,V]),J=(0,r.useCallback)((()=>{_(null),D("chats"),z([])}),[]),$=(0,r.useCallback)((()=>{if(!C)return;const e=C.participants.filter((e=>(e.user||e)._id!==(null===G||void 0===G?void 0:G._id))).map((e=>e.user||e));e.length>0&&q(e,"voice",C._id)}),[C,G,q]),ee=(0,r.useCallback)((()=>{if(!C)return;const e=C.participants.filter((e=>(e.user||e)._id!==(null===G||void 0===G?void 0:G._id))).map((e=>e.user||e));e.length>0&&q(e,"video",C._id)}),[C,G,q]);(0,r.useEffect)((()=>{e&&j.y.isAuthenticated()&&Q()}),[e,Q]);const te=(0,r.useCallback)((e=>{var t;if("group"===e.type)return e.groupName||"Group Chat";const s=null===(t=e.participants)||void 0===t?void 0:t.find((e=>(e.user||e)._id!==(null===G||void 0===G?void 0:G._id)));if(s){const e=s.user||s;return"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||"Unknown User"}return"Unknown User"}),[G]),se=(0,r.useCallback)((e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[]),ae=s.filter((e=>{var t,s;return!(null===(t=e.groupName)||void 0===t||!t.toLowerCase().includes(F.toLowerCase()))||(null===(s=e.participants)||void 0===s?void 0:s.some((e=>{var t,s;const a=e.user||e;return(null===a||void 0===a||null===(t=a.firstName)||void 0===t?void 0:t.toLowerCase().includes(F.toLowerCase()))||(null===a||void 0===a||null===(s=a.lastName)||void 0===s?void 0:s.toLowerCase().includes(F.toLowerCase()))})))}));return j.y.isAuthenticated()?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(n.P.button,{onClick:()=>t(!e),className:"fixed bottom-6 right-6 w-14 h-14 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg flex items-center justify-center z-50 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:e?(0,w.jsx)(l.A,{size:24}):(0,w.jsx)(c.A,{size:24})}),(0,w.jsx)(i.N,{children:e&&(0,w.jsx)(n.P.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:"fixed bottom-24 right-6 w-80 h-96 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 flex flex-col z-40 overflow-hidden",children:"chats"===X?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,w.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Chats"}),(0,w.jsx)("div",{className:"flex items-center space-x-2",children:(0,w.jsx)("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,w.jsx)(o.A,{size:16,className:"text-gray-600 dark:text-gray-400"})})})]}),(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)(d.A,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,w.jsx)("input",{type:"text",placeholder:"Search chats...",value:F,onChange:e=>H(e.target.value),className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,w.jsx)("div",{className:"flex-1 overflow-y-auto",children:S?(0,w.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,w.jsx)(u.A,{className:"animate-spin text-blue-600",size:24})}):0===ae.length?(0,w.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)(c.A,{size:48,className:"mx-auto mb-2 opacity-50"}),(0,w.jsx)("p",{children:"No chats found"})]})}):ae.map((e=>(0,w.jsx)(n.P.div,{onClick:()=>Z(e),className:"p-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0",whileHover:{backgroundColor:"rgba(59, 130, 246, 0.05)"},children:(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:"group"===e.type?(0,w.jsx)(h.A,{size:16}):te(e).charAt(0).toUpperCase()}),(0,w.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:te(e)}),e.unreadCount&&e.unreadCount>0&&(0,w.jsx)("span",{className:"bg-blue-600 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:e.unreadCount})]}),e.lastMessage&&(0,w.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:e.lastMessage.content})]})]})},e._id)))})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)("button",{onClick:J,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,w.jsx)(x.A,{size:16,className:"text-gray-600 dark:text-gray-400"})}),(0,w.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:"group"===(null===C||void 0===C?void 0:C.type)?(0,w.jsx)(h.A,{size:14}):te(C).charAt(0).toUpperCase()}),(0,w.jsxs)("div",{children:[(0,w.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:te(C)}),T&&(0,w.jsx)("p",{className:"text-xs text-blue-600",children:"typing..."})]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)("button",{onClick:$,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,w.jsx)(m.A,{size:16,className:"text-gray-600 dark:text-gray-400"})}),(0,w.jsx)("button",{onClick:ee,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,w.jsx)(y.A,{size:16,className:"text-gray-600 dark:text-gray-400"})}),(0,w.jsx)("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,w.jsx)(g.A,{size:16,className:"text-gray-600 dark:text-gray-400"})})]})]})}),(0,w.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3","data-messages-container":!0,children:S?(0,w.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,w.jsx)(u.A,{className:"animate-spin text-blue-600",size:24})}):0===M.length?(0,w.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)(c.A,{size:48,className:"mx-auto mb-2 opacity-50"}),(0,w.jsx)("p",{children:"No messages yet"}),(0,w.jsx)("p",{className:"text-sm",children:"Start the conversation!"})]})}):M.map((e=>{const t=e.sender._id===(null===G||void 0===G?void 0:G._id);return(0,w.jsx)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex ".concat(t?"justify-end":"justify-start"),children:(0,w.jsxs)("div",{className:"max-w-xs px-3 py-2 rounded-lg ".concat(t?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white"),children:[(0,w.jsx)("p",{className:"text-sm",children:e.content}),(0,w.jsx)("p",{className:"text-xs mt-1 ".concat(t?"text-blue-100":"text-gray-500 dark:text-gray-400"),children:se(e.createdAt)})]})},e._id)}))}),(0,w.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,w.jsx)(p.A,{size:16,className:"text-gray-600 dark:text-gray-400"})}),(0,w.jsx)("div",{className:"flex-1 relative",children:(0,w.jsx)("input",{type:"text",value:E,onChange:W,onKeyPress:Y,placeholder:"Type a message...",className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,w.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,w.jsx)(f.A,{size:16,className:"text-gray-600 dark:text-gray-400"})}),(0,w.jsx)("button",{onClick:B,disabled:!E.trim(),className:"p-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:(0,w.jsx)(v.A,{size:16})})]})})]})})})]}):null}},7118:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},7922:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]])},9292:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9333:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(7784).A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])}}]);
//# sourceMappingURL=338.3cd33d3f.chunk.js.map